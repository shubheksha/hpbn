# [Building Blocks of TCP](https://hpbn.co/building-blocks-of-tcp/)


The two protocols vital to the functioning of the internet are:

1) **IP (Internet Protocol)**: it's responsible for the host-to-host routing and addressing.
2) **TCP (Transmission Control Protocol)**: it's responsible for delivery messages (packets/bytes) reliably over unreliable
channels. TCP guarantees that the message sent by a sender will be delivered to the receiver in the same order
as it was sent and will be identical to it.

TCP/IP is also commonly referred to as the Internet Protocol Suite.

## [Three Way Handshake](https://hpbn.co/building-blocks-of-tcp/#three-way-handshake)
To open a connection between a client and a server, TCP uses a three way handshake.
Both the client and the server pick a random number (for additional security) which is called the `sequence number`.
It is used to number the packets exchanged. Other connection-specific variables are also initialized.

1) **SYN**: The first packet sent by the client is **SYN** which contains a random sequence number `x` along with other flags and options.

2) **SYN ACK**: The second packet is sent by the server ackowledging the receipt of the **SYN** packet.
It contains a sequence number randomly generated by the server `y` along with its flags and options.
It also increments `x` before sending the response.

3) **ACK**: Both `x` and `y` are incremented by the server and the response is sent, thus completing the handshake.

Only _after_ the handshake, data can be exchanged between the two parties.

 * The client can begin sending data right after it dispatches the ACK packet.
 *  The server must wait till it receives the *ACK* packet to send data.


![three way handshake](https://hpbn.co/assets/diagrams/eefa1170a673da0140efe1ece7a2884b.svg)

TCP connections are expensive to create due to the mandatory delay introduced by the three way handshake.
Hence, connection reuse is critical for applications running over TCP.





